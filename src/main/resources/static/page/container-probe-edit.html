<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../lib/layui-v2.6.3/css/layui.css" media="all">
    <link rel="stylesheet" href="../../css/public.css" media="all">
    <style>
        body {
            background-color: #ffffff;
        }
    </style>
</head>
<body>
<div class="layui-form layuimini-form">

    <div class="layui-form-item">
        <label class="layui-form-label">pod存活探测</label>
        <div class="layui-input-block">
            <select name="probe" id="probe">
                <option value="Command Probe">命令探针(Command Probe)：该探针类型会在容器中执行一个命令。如果该命令成功执行并且返回值为
                    0，则认为该容器健康；否则，就认为它不健康。
                </option>
                <option value="HTTP Probe">HTTP 探针(HTTP Probe)：该探针类型会向容器中指定的 IP 地址和端口发送 HTTP
                    请求。如果返回的 HTTP 状态码位于 200 到 399 之间，则认为该容器健康；否则，就认为它不健康
                </option>
                <option value="TCP Probe">TCP 探针(TCP Probe)：该探针类型会向容器中指定的 IP 地址和端口发送 HTTP 请求。如果返回的
                    HTTP 状态码位于 200 到 399 之间，则认为该容器健康；否则，就认为它不健康
                </option>
            </select>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline" style=" min-width: 466px; ">
            <label class="layui-form-label">就绪检测</label>
            <div class="layui-input-block">

                <div class="layui-form" action="" lay-filter="readinessProbe-form">

                    <div class="layui-form-item">

                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">初始等待(秒)</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="initialDelaySeconds">
                            </div>
                        </div>

                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">检测次数</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="periodSeconds">
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">成功次数</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="successThreshold">
                            </div>
                        </div>

                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">失败次数</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="failureThreshold">
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">协议</label>
                            <div class="layui-input-inline">
                                <select name="scheme">
                                    <option value="HTTP">HTTP
                                    </option>

                                    <option value="HTTPS">HTTPS
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">检测端口</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="port">
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">检测路径</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="path">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>


    <div class="layui-form-item">
        <div class="layui-inline" style=" min-width: 466px; ">
            <label class="layui-form-label">运行检测</label>
            <div class="layui-input-block">

                <div class="layui-form" action="" lay-filter="livenessProbe-form">


                    <div class="layui-form-item">
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">初始等待(秒)</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="initialDelaySeconds">
                            </div>
                        </div>

                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">检测次数</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="periodSeconds">
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">成功次数</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="successThreshold">
                            </div>
                        </div>

                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">失败次数</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="failureThreshold">
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">协议</label>
                            <div class="layui-input-inline">
                                <select name="scheme">
                                    <option value="HTTP">HTTP
                                    </option>

                                    <option value="HTTPS">HTTPS
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">检测端口</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="port">
                            </div>
                        </div>
                        <div class="layui-inline" style=" min-width: 466px; ">
                            <label class="layui-form-label">检测路径</label>
                            <div class="layui-input-inline">
                                <input class="layui-input" style="width: 360px" name="path">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <div class="layui-form-item  ">
        <div class="layui-input-block">
            <button class="layui-btn layui-btn-normal" lay-submit lay-filter="saveBtn">添加</button>
        </div>
    </div>

</div>
<script src="../../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
<script src="../lib/js-yaml-4.1.0/js-yaml.js" charset="utf-8"></script>
<script src="../lib/highlight-11.7.0/highlight.js" charset="utf-8"></script>
<script src="../lib/highlight-11.7.0/languages/yaml.min.js" charset="utf-8"></script>
<script src="../lib/highlight-11.7.0/languages/json.min.js" charset="utf-8"></script>
<script>
    layui.use(['form'], function () {
        var form = layui.form,
            layer = layui.layer,
            $ = layui.$;

        form.on('select(probe)', function (data) {


        });


        //监听提交
        form.on('submit(saveBtn)', function (data) {
            // console.log(data)
            //
            // jsonExample.metadata.name = data.field.deploymentName
            // jsonExample.metadata.labels.app = data.field.deploymentName
            // jsonExample.spec.selector.matchLabels.app = data.field.deploymentName
            // jsonExample.spec.template.metadata.labels.app = data.field.deploymentName
            // jsonExample.spec.template.spec.containers[0].name = data.field.deploymentName
            // jsonExample.spec.template.spec.containers[0].image = data.field.imageName
            // jsonExample.spec.template.spec.containers[0].imagePullPolicy = data.field.imagePullPolicy
            // jsonExample.spec.replicas = parseInt(data.field.replicas)
            // console.log(jsonExample)
            // // let json = document.getElementById('config-json')?.innerText;
            // let jsonObject = jsonExample
            // let json = JSON.stringify(jsonExample)
            // $.post(`../deploy/addByJson/default/${jsonObject.metadata.name}`+'?k8sId='+parent.k8sId, {deploymentJson: json},(res) => {
            //
            //     if (res.code===10000) {
            //         parent.layer.msg('发送成功')
            //     }else {
            //         parent.layer.msg(res.msg)
            //     }
            //
            //     var iframeIndex = parent.layer.getFrameIndex(window.name);
            //     parent.layer.close(iframeIndex);
            //     return false;
            // })
            //
            //


            return false;
        });


    });
</script>
</body>
</html>
